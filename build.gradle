apply plugin: 'java'
apply plugin: 'idea'
apply plugin: 'eclipse'
apply plugin: 'maven'
apply plugin: 'application'

group = 'org.jboss.aesh'
version = '0.60-SNAPSHOT'

mainClassName = 'org.jboss.aesh.nanook.AppMain'

sourceCompatibility = 1.8
targetCompatibility = 1.8

repositories {
  mavenCentral()
  mavenLocal()
  maven {
    url 'https://oss.sonatype.org/content/groups/public'
  }
}

dependencies {
  compile group: 'org.jboss.aesh', name: 'aesh', version: version
  compile group: 'org.jboss.aesh', name: 'aesh-extensions', version: version
  compile group: 'com.github.esmerilprogramming', name: 'overtown', version: '0.4.0-SNAPSHOT'
  testCompile group: 'junit', name: 'junit', version: '4.+'
}

jar {
  manifest {
    attributes 'Implementation-Title': 'A web terminal', 'Implementation-Version': version, 'Main-Class': 'org.jboss.aesh.nanook.AppMain', 'Class-Path': configurations.compile.collect { it.getName() }.join(' ')
  }
}

task wrapper(type: Wrapper) {
  gradleVersion = '2.4'
}

run {
  if (System.getProperty('DEBUG', 'false') == 'true') {
    jvmArgs '-Xdebug',
            '-Xrunjdwp:transport=dt_socket,server=y,suspend=y,address=5678'
  }
}
